var $K2=jQuery.noConflict();$K2(document).ready(function(){function getUrlParams(b,c){var d=document.getElementsByTagName('script');var e=d.length;for(var a=0;a<e;a++){var f=d[a].src;if(f.indexOf(b)>=0){c=c.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var g=new RegExp("[\\?&]"+c+"=([^&#]*)");var h=g.exec(f);if(h!==null){return h[1]}}}}var i=getUrlParams('k2.frontend.js',gBaseUrl);$K2('#comment-form').submit(function(b){b.preventDefault();$K2('#formLog').empty().addClass('formLogLoading');$K2.ajax({url:$K2('#comment-form').attr('action'),type:'post',dataType:'json',data:$K2('#comment-form').serialize(),success:function(a){$K2('#formLog').removeClass('formLogLoading').html(a.message).addClass(a.cssClass);if(typeof(Recaptcha)!="undefined"){Recaptcha.reload()}if(a.refresh){window.location.reload()}}})});$K2('.commentRemoveLink').click(function(b){b.preventDefault();var c=$K2(this);$K2(c).parent().addClass('commentToolbarLoading');$K2.ajax({url:$K2(c).attr('href'),type:'post',data:$K2('#comment-form input:last').serialize(),success:function(a){$K2(c).parent().removeClass('commentToolbarLoading');if(a=='true'){$K2(c).parent().parent().remove()}}})});$K2('.commentApproveLink').click(function(b){b.preventDefault();var c=$K2(this);$K2(c).parent().addClass('commentToolbarLoading');$K2.ajax({url:$K2(c).attr('href'),type:'post',data:$K2('#comment-form input:last').serialize(),success:function(a){$K2(c).parent().removeClass('commentToolbarLoading');if(a=='true'){$K2(c).parent().parent().removeClass('unpublishedComment')}}})});$K2('.k2ReportUserButton').click(function(b){b.preventDefault();if(confirm(K2Language[0])){var c=$K2(this);$K2(c).parent().addClass('commentToolbarLoading');$K2.ajax({url:$K2(c).attr('href'),type:'GET',success:function(a){$K2(c).parent().removeClass('commentToolbarLoading');alert(a)}})}});$K2('#k2ReportCommentForm').submit(function(b){b.preventDefault();$K2('#k2ReportCommentFormLog').empty().addClass('formLogLoading');$K2.ajax({url:$K2('#k2ReportCommentForm').attr('action'),type:'post',data:$K2('#k2ReportCommentForm').serialize(),success:function(a){$K2('#formLog').removeClass('formLogLoading').html(a).css('display','block');if(typeof(Recaptcha)!="undefined"){Recaptcha.reload()}}})});$K2('#fontDecrease').click(function(a){a.preventDefault();$K2('.itemFullText').removeClass('largerFontSize');$K2('.itemFullText').addClass('smallerFontSize')});$K2('#fontIncrease').click(function(a){a.preventDefault();$K2('.itemFullText').removeClass('smallerFontSize');$K2('.itemFullText').addClass('largerFontSize')});$K2('.k2Anchor').click(function(a){a.preventDefault();var b=this.hash;$K2('html, body').stop().animate({scrollTop:$K2(b).offset().top},500)});$K2('.itemRatingForm a').click(function(d){d.preventDefault();var e=$K2(this).attr('rel');if(!e){e=$K2(this).data('id')}var f=$K2('#itemRatingLog'+e).empty().addClass('formLogLoading');var g=$K2(this).html();$K2.ajax({url:i+"index.php?option=com_k2&view=item&task=vote&format=raw&user_rating="+g+"&itemID="+e,type:'get',success:function(c){f.removeClass('formLogLoading');f.html(c);$K2.ajax({url:i+"index.php?option=com_k2&view=item&task=getVotesPercentage&format=raw&itemID="+e,type:'get',success:function(b){$K2('#itemCurrentRating'+e).css('width',b+"%");setTimeout(function(){$K2.ajax({url:i+"index.php?option=com_k2&view=item&task=getVotesNum&format=raw&itemID="+e,type:'get',success:function(a){f.html(a)}})},2000)}})}})});$K2('.classicPopup').click(function(a){a.preventDefault();if($K2(this).attr('rel')){var b=$K2(this).attr('rel');b=b.replace(/'/g,'"');var c=$K2.parseJSON(b)}else{var c={x:900,y:600}}window.open($K2(this).attr('href'),'K2PopUpWindow','width='+c.x+',height='+c.y+',menubar=yes,resizable=yes')});$K2('div.k2LiveSearchBlock form input[name=searchword]').keyup(function(b){var c=$K2(this).parent().parent();if($K2(this).val().length>3&&b.key!='enter'){$K2(this).addClass('k2SearchLoading');c.find('.k2LiveSearchResults').css('display','none').empty();c.find('input[name=t]').val($K2.now());c.find('input[name=format]').val('raw');var d='index.php?option=com_k2&view=itemlist&task=search&'+c.find('form').serialize();c.find('input[name=format]').val('html');$K2.ajax({url:d,type:'get',success:function(a){c.find('.k2LiveSearchResults').html(a);c.find('input[name=searchword]').removeClass('k2SearchLoading');c.find('.k2LiveSearchResults').css('display','block')}})}else{c.find('.k2LiveSearchResults').css('display','none').empty()}});if(typeof($K2().live)=="undefined"){$K2('.k2CalendarBlock').on('click','.calendarNavLink',function(b){b.preventDefault();var c=$K2(this).parent().parent().parent().parent();var d=$K2(this).attr('href');c.empty().addClass('k2CalendarLoader');$K2.ajax({url:d,type:'post',success:function(a){c.html(a);c.removeClass('k2CalendarLoader')}})})}else{$K2('a.calendarNavLink').live('click',function(b){b.preventDefault();var c=$K2(this).parent().parent().parent().parent();var d=$K2(this).attr('href');c.empty().addClass('k2CalendarLoader');$K2.ajax({url:d,type:'post',success:function(a){c.html(a);c.removeClass('k2CalendarLoader')}})})}$K2('.k2Scroller').css('width',($K2('.k2Scroller').find('.k2ScrollerElement:first').outerWidth(true))*$K2('.k2Scroller').children('.k2ScrollerElement').length)});$K2(window).load(function(){var a=$K2('.subCategory, .k2EqualHeights');var b=0;a.each(function(){b=Math.max(b,parseInt($K2(this).css('height')))});a.css('height',b)});(function(a,b){if(typeof define==='function'&&define.amd){define([],b)}else if(typeof module==='object'&&module.exports){module.exports=b()}else{a.SimpleLightbox=b()}}(this,function(){function assign(a){for(var i=1;i<arguments.length;i++){var b=arguments[i];if(b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c])}}}return a}function addClass(a,b){if(a&&b){a.className+=' '+b}}function removeClass(a,b){if(a&&b){a.className=a.className.replace(new RegExp('(\\s|^)'+b+'(\\s|$)'),' ').trim()}}function parseHtml(a){var b=document.createElement('div');b.innerHTML=a.trim();return b.childNodes[0]}function matches(a,b){return(a.matches||a.matchesSelector||a.msMatchesSelector).call(a,b)}function getWindowHeight(){return'innerHeight'in window?window.innerHeight:document.documentElement.offsetHeight}function SimpleLightbox(a){this.init.apply(this,arguments)}SimpleLightbox.defaults={elementClass:'',elementLoadingClass:'slbLoading',htmlClass:'slbActive',closeBtnClass:'',nextBtnClass:'',prevBtnClass:'',loadingTextClass:'',closeBtnCaption:'Close',nextBtnCaption:'Next',prevBtnCaption:'Previous',loadingCaption:'Loading...',bindToItems:true,closeOnOverlayClick:true,closeOnEscapeKey:true,nextOnImageClick:true,showCaptions:true,captionAttribute:'title',urlAttribute:'href',startAt:0,loadingTimeout:100,appendTarget:'body',beforeSetContent:null,beforeClose:null,afterClose:null,beforeDestroy:null,afterDestroy:null,videoRegex:new RegExp(/youtube.com|vimeo.com/)};assign(SimpleLightbox.prototype,{init:function(c){c=this.options=assign({},SimpleLightbox.defaults,c);var d=this;var f;if(c.$items){f=c.$items.get()}if(c.elements){f=[].slice.call(typeof c.elements==='string'?document.querySelectorAll(c.elements):c.elements)}this.eventRegistry={lightbox:[],thumbnails:[]};this.items=[];this.captions=[];if(f){f.forEach(function(a,b){d.items.push(a.getAttribute(c.urlAttribute));d.captions.push(a.getAttribute(c.captionAttribute));if(c.bindToItems){d.addEvent(a,'click',function(e){e.preventDefault();d.showPosition(b)},'thumbnails')}})}if(c.items){this.items=c.items}if(c.captions){this.captions=c.captions}},addEvent:function(a,b,c,d){this.eventRegistry[d||'lightbox'].push({element:a,eventName:b,callback:c});a.addEventListener(b,c);return this},removeEvents:function(b){this.eventRegistry[b].forEach(function(a){a.element.removeEventListener(a.eventName,a.callback)});this.eventRegistry[b]=[];return this},next:function(){return this.showPosition(this.currentPosition+1)},prev:function(){return this.showPosition(this.currentPosition-1)},normalizePosition:function(a){if(a>=this.items.length){a=0}else if(a<0){a=this.items.length-1}return a},showPosition:function(a){var b=this.normalizePosition(a);if(typeof this.currentPosition!=='undefined'){this.direction=b>this.currentPosition?'next':'prev'}this.currentPosition=b;return this.setupLightboxHtml().prepareItem(this.currentPosition,this.setContent).show()},loading:function(a){var b=this;var c=this.options;if(a){this.loadingTimeout=setTimeout(function(){addClass(b.$el,c.elementLoadingClass);b.$content.innerHTML='<p class="slbLoadingText '+c.loadingTextClass+'">'+c.loadingCaption+'</p>';b.show()},c.loadingTimeout)}else{removeClass(this.$el,c.elementLoadingClass);clearTimeout(this.loadingTimeout)}},prepareItem:function(a,b){var c=this;var d=this.items[a];this.loading(true);if(this.options.videoRegex.test(d)){b.call(c,parseHtml('<div class="slbIframeCont"><iframe class="slbIframe" frameborder="0" allowfullscreen src="'+d+'"></iframe></div>'))}else{var e=parseHtml('<div class="slbImageWrap"><img class="slbImage" src="'+d+'" /></div>');this.$currentImage=e.querySelector('.slbImage');if(this.options.showCaptions&&this.captions[a]){e.appendChild(parseHtml('<div class="slbCaption">'+this.captions[a]+'</div>'))}this.loadImage(d,function(){c.setImageDimensions();b.call(c,e);c.loadImage(c.items[c.normalizePosition(c.currentPosition+1)])})}return this},loadImage:function(a,b){if(!this.options.videoRegex.test(a)){var c=new Image();b&&(c.onload=b);c.src=a}},setupLightboxHtml:function(){var o=this.options;if(!this.$el){this.$el=parseHtml('<div class="slbElement '+o.elementClass+'">'+'<div class="slbOverlay"></div>'+'<div class="slbWrapOuter">'+'<div class="slbWrap">'+'<div class="slbContentOuter">'+'<div class="slbContent"></div>'+'<button type="button" title="'+o.closeBtnCaption+'" class="slbCloseBtn '+o.closeBtnClass+'">Ã—</button>'+(this.items.length>1?'<div class="slbArrows">'+'<button type="button" title="'+o.prevBtnCaption+'" class="prev slbArrow'+o.prevBtnClass+'">'+o.prevBtnCaption+'</button>'+'<button type="button" title="'+o.nextBtnCaption+'" class="next slbArrow'+o.nextBtnClass+'">'+o.nextBtnCaption+'</button>'+'</div>':'')+'</div>'+'</div>'+'</div>'+'</div>');this.$content=this.$el.querySelector('.slbContent')}this.$content.innerHTML='';return this},show:function(){if(!this.modalInDom){document.querySelector(this.options.appendTarget).appendChild(this.$el);addClass(document.documentElement,this.options.htmlClass);this.setupLightboxEvents();this.modalInDom=true}return this},setContent:function(a){var b=typeof a==='string'?parseHtml(a):a;this.loading(false);this.setupLightboxHtml();removeClass(this.$content,'slbDirectionNext');removeClass(this.$content,'slbDirectionPrev');if(this.direction){addClass(this.$content,this.direction==='next'?'slbDirectionNext':'slbDirectionPrev')}if(this.options.beforeSetContent){this.options.beforeSetContent(b,this)}this.$content.appendChild(b);return this},setImageDimensions:function(){if(this.$currentImage){this.$currentImage.style.maxHeight=getWindowHeight()+'px'}},setupLightboxEvents:function(){var b=this;if(this.eventRegistry.lightbox.length){return this}this.addEvent(this.$el,'click',function(e){var a=e.target;if(matches(a,'.slbCloseBtn')||(b.options.closeOnOverlayClick&&matches(a,'.slbWrap'))){b.close()}else if(matches(a,'.slbArrow')){matches(a,'.next')?b.next():b.prev()}else if(b.options.nextOnImageClick&&b.items.length>1&&matches(a,'.slbImage')){b.next()}}).addEvent(document,'keyup',function(e){b.options.closeOnEscapeKey&&e.keyCode===27&&b.close();if(b.items.length>1){(e.keyCode===39||e.keyCode===68)&&b.next();(e.keyCode===37||e.keyCode===65)&&b.prev()}}).addEvent(window,'resize',function(){b.setImageDimensions()});return this},close:function(){if(this.modalInDom){this.runHook('beforeClose');this.removeEvents('lightbox');this.$el&&this.$el.parentNode.removeChild(this.$el);removeClass(document.documentElement,this.options.htmlClass);this.modalInDom=false;this.runHook('afterClose')}this.direction=undefined;this.currentPosition=this.options.startAt},destroy:function(){this.close();this.runHook('beforeDestroy');this.removeEvents('thumbnails');this.runHook('afterDestroy')},runHook:function(a){this.options[a]&&this.options[a](this)}});SimpleLightbox.open=function(a){var b=new SimpleLightbox(a);return a.content?b.setContent(a.content).show():b.showPosition(b.options.startAt)};SimpleLightbox.registerAsJqueryPlugin=function($){$.fn.simpleLightbox=function(a){var b;var c=this;return this.each(function(){if(!$.data(this,'simpleLightbox')){b=b||new SimpleLightbox($.extend({},a,{$items:c}));$.data(this,'simpleLightbox',b)}})};$.SimpleLightbox=SimpleLightbox};if(typeof window!=='undefined'&&window.jQuery){SimpleLightbox.registerAsJqueryPlugin(window.jQuery)}return SimpleLightbox}));