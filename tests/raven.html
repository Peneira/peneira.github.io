<html>

<head>
	<meta name="author" content="pysdp" />
	<meta name="generator" content="notepad++"/>
	<script src="../js/jquery-latest.js"></script>
	<script src="../js/md5-min.js"></script>
	<link rel="stylesheet" type="text/css" href="./css/styles.css" />
	<link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

<style type="text/css">

#header, #articles, #formulario, #informe {
	float: center;
	margin-top:40px;
	margin-left:auto;
	margin-right:auto;
	margin-bottom:20px;
	padding: 1ex 2ex 1ex 1ex;
	max-width: 1000px;
	min-width: 600px;
	}
#articles {
	margin-bottom: 300px ;  
	}

#articles, #formulario, #informe {
	border: 1px solid gray;
	border-radius: 5px;
	margin-bottom: 100px;
	}
#nombre, #edad, #sexo, #fecha {	
	float:right; margin-left:10px;
	margin-right:10px;
	}
div.opc {
	width: 100%;
	height: 40px;
	}
	
input.opc{
	background-color: transparent;
	border-style: solid;
	border-width: 0px 0px 1px 0px;
	border-color: gray;
	color: gray;
	}

#informe {
	display: none;
	}

body {
	background: white;
	}

h1, h2 {
	font-family: 'Roboto Slab', serif;
	color:black;
	}

div.m6r	{
	margin: auto auto auto auto;
	float:center;
	padding: 10px 10px 10px 10px;
	text-align: center;
	width: 600px;
	}
div.mpeq6 {
	width: 190px;
	height: 110px;
	position: relative;
	float: left;
	margin: 10px 0px 10px 0px;
	}

div.m8r	{
	margin: auto auto auto auto;
	float:center;
	padding: 10px 10px 10px 10px;
	text-align: center;
	width: 650px;
	}
div.mpeq8 {
	width: 160px;
	height: 110px;
	position: relative;
	float: left;
	margin: 10px 0px 10px 0px;
	}

div.error {
	font: 90%  'Raleway', arial, sans-serif, helvetica, verdana;
	color: red;
	}	

div.clear {
	clear: both;
	}

/* ##### COLORES ##### */
#header {
	background: none;
	 }
#contenidos {
	color: black;
	background: none;
	}
#contenidos a:hover, #formulario a:hover, #informe a:hover {
	color:rgba(54, 54, 54, 0.7);
	}
#contenidos a, #formulario a, #informe a {
	color: orange;
	}

.boton, .boton a {
	background: gray;
	color: white;
	}
#articles, #formulario, #informe {
	color: black;
	}
#aboutme {
	background: none;
	}

.footBar { 
	color: orange;
	background-color: white; 
	}

.boxtst {
	width: 100px;
	height: 100px;
	position: relative;
	float: left;
	margin: 15px 15px 15px 15px;
	border: 1px solid orange;
	border-radius: 5px;
	padding: 1ex 2ex 1ex 1ex;
	text-align: center;
	font-family: "Raleway", cursive;
	font-size: 15pt;
	color: orange;
	background-color: rgba(54, 54, 54, 0.9);
	
	}
.boxtst:hover {
	color: white;
	background-color: orange;
	border: 1px solid orange;
	}
</style>
<script>
data = 'El nombre'
lastTimestamp = Math.round(+new Date());
loadedMatrix = 0;
selectedSet = "A";

type6 = ["A", "B"]

function anota(valor){
	data = data + ","+ valor + "," + (Math.round(+new Date())-lastTimestamp).toString();
	lastTimestamp = Math.round(+new Date());
	console.log(data);
	document.getElementById("matrices").innerHTML = "";
	loadNext();
	}
function matriz6r(num, mset) {
	respuestas = ""
	for (i = 1; i<7; i++){
		matemp = "<div class = 'mpeq6'><a onclick = anota(" +i+ ")><img src='../content/raven/"+ mset + num +"-"+i+".png' /></a></div>"
		respuestas = respuestas + matemp;
	}
		
	var contenido = document.createElement('m6r');
	contenido.innerHTML = "<div class='m6r'><h2>"+ mset + " " + num + "</h2><div class='mbig'><img src='../content/raven/" + mset + num + ".png' /></div><div class='mresps'>"+ respuestas +"</div><div class='clear'></div>";
	document.getElementById("matrices").appendChild(contenido);
	}

function matriz8r(num, mset) {
	respuestas = ""
	for (i = 1; i<9; i++){
		matemp = "<div class = 'mpeq8'><a onclick = anota(" +i+ ")><img src='../content/raven/"+ mset + num +"-"+i+".png' /></a></div>"
		respuestas = respuestas + matemp;
	}
		
	var contenido = document.createElement('m6r');
	contenido.innerHTML = "<div class='m8r'><h2>"+ mset + " " + num + "</h2><div class='mbig'><img src='../content/raven/" + mset + num + ".png' /></div><div class='mresps'>"+ respuestas +"</div><div class='clear'></div>";
	document.getElementById("matrices").appendChild(contenido);
	}


function comenzar(setM) {
	var nom=document.getElementById('inombre').value;
	var eda=document.getElementById('iedad').value;
	var sex=document.getElementById('isexo').value;
	loadedMatrix = 1;
	selectedSet = setM;
	data = nom + "," + eda + "," + sex;
	$(articles).hide();
	$(header).hide();
	if (type6.indexOf(selectedSet) != -1){  
	   	matriz6r(loadedMatrix.toString(), selectedSet);
	} else {
		matriz8r(loadedMatrix.toString(), selectedSet);
		}
	data = data + ","+ selectedSet
	lastTimestamp = Math.round(+new Date());
	}
function loadNext() {
	loadedMatrix++;
	if (loadedMatrix < 13){
		if (type6.indexOf(selectedSet) != -1){  
		   	matriz6r(loadedMatrix.toString(), selectedSet);
		} else {
			matriz8r(loadedMatrix.toString(), selectedSet);
			}
		}
	else {
		$(informe).show();
		contenido = document.createElement('texto');
		contenido.innerHTML = "<p>Resumen... blau blau </p><p>Botón de enviar</p>";
		document.getElementById("informe").appendChild(contenido);
		document.getElementById('csvp').innerHTML = data;
		}
	}
function sendMail() {
		var contenido = document.getElementById("csvp").innerHTML;
		var link = "mailto:jorgealonso@openmailbox.org"
		     + "?subject=" + escape("Raven (SPM) - " + document.getElementById("inombre").value)
		     + "&body=" + escape(contenido);

		window.location.href = link;
	}
</script>

</head>

<body>
	<div id="header">
		<h1>Test de Matrices Progresivas de Raven General</h1>
		<div id="usuario">
			<div id="nombre"><label>Nombre:</label><input  class='opc' type="text" id="inombre" size="50"></div>
			<div id="edad"><label>Edad:</label><input  class='opc' type="text" id="iedad" size="3"></div>
			<div id="sexo"><label>Sexo:</label><select  class='opc' id="isexo">
						<option value="Niño">Niño</option>
						<option value="Niña">Niña</option>
					</select></div>
			<div id="fecha"><label>Fecha:</label><input  class='opc' type="text" id="ifecha" value="dd/mm/aaaa"></div>
			<script>
				var fecha = new Date()
				document.getElementById("ifecha").value = fecha.getDate() + "/" + (fecha.getMonth() +1) + "/" + fecha.getFullYear();

			</script>
		</div>
		<div class='clear'></div>
	</div>
	<div id='contenidos'>
		<div id="articles">
			<p>Los tests de Matrices Progresivas de Raven se desarrollaron inicialmente para su uso en el estudio de los orígenes genéticos y ambientales de la conducta inteligente. Su finalidad era medir uno de los componentes del factor 'g' identificado por Spearman, la capacidad de educción de relaciones.</p>
			<p>Nacieron en la mitad de la década de los 30 y tuvieron una revisión y tipificación en 1938, conocida como PM 1938; las sucesivas revisiones han recibido las siglas de PM-47, PM-56, etc. que aludían a una determinada Escala.</p>
			<p>En primer lugar se creó la Escala General (SPM), destinada a cubrir todo el ámbito de aplicabilidad, desde los niños o los sujetos con baja dotación a los adultos de dotación elevada.</p>
			<p> La escala SPM (Standard Progressive Matrices') o Escala General; consta de un Cuadernillo con seis conjuntos (A a E) de 12 elementos cada uno.</p>
			<p>Mire esto</p>
			<div class='m6r'>
				<div class='mbig'>
					<img src='../content/raven/A1.png' />
				</div>
				<div class='mresps'>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-1.png' />
					</div>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-2.png' />
					</div>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-3.png' />
					</div>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-4.png' />
					</div>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-5.png' />
					</div>
					<div class = 'mpeq6'>
						<img src='../content/raven/A1-6.png' />
					</div>
					<div class='clear'></div>
				</div>
			</div>
			<p>Vea, es un dibujo y le falta un trozo. Estas piezas de aquí debajo tienen igual forma que el hueco de arriva, pero sólo una tiene el dibujo correcto.</p>
			<p>El número 1 tiene igual forma, pero el dibujo no es correcto. Tampoco sirve el número 2, por que no tiene dentro ningún dibujo. El número 3 tiene un dibujo distinto. El número  6 casi es correcto pero le falta un trozo. Sólo uno es correcto. Señale Vd. cuál es.</p>
			<p>Cuando esté listo, pulse sobre el set que desea comenzar:</p>
			<div class="boxtst", onClick="comenzar('A')">
				<p>Set A</p>
			</div>
			<div class="boxtst", onClick="comenzar('B')">
				<p>Set B</p>
			</div>
			<div class="boxtst", onClick="comenzar('C')">
				<p>Set C</p>
			</div>
			<div class="boxtst", onClick="comenzar('D')">
				<p>Set D</p>
			</div>
			<div class="boxtst", onClick="comenzar('E')">
				<p>Set E</p>
			</div>
			<div class='clear'></div>
		</div>

		<div id="matrices">
		</div>
		<div id="informe">
			<h2>Resultados</h2>
			<div id='csvp' style="display: none;">[Blau blau explicación blau].</div>
			<p>¡Para más orientación puedes solicitar una consulta! Estaremos encantados de ayudarte.</p>
			<p><a href="#" onclick="sendMail()">Enviar estos resultados!</a></p>
		</div>
	</div>
</body>

</html>
